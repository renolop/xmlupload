package com.xmlupload.apirest;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.multipart.MultipartFile;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

@RestController
@RequestMapping(value = "/upload")
public class XmlUploadRest{
	
	@PostMapping
	public void uploadArquivoXml(@RequestParam("file") String file) {
		/**try { 
			DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
			DocumentBuilder db = dbf.newDocumentBuilder();
			Document doc = db.parse(new Inpfile.getInputStream());
			
			//agentes
			NodeList listaAgentes = doc.getChildNodes();
			for (int i = 0; i < listaAgentes.getLength(); i++) {

	              Node node = listaAgentes.item(i);
	              NodeList listaCamposAgente = node.getChildNodes();

	              for (int j = 0; j < listaCamposAgente.getLength(); j++) {
	            	  Node campo = listaCamposAgente.item(j);
	            	  if( campo.getNodeName().equalsIgnoreCase("codigo") )
	            		  
	            		  System.out.println( campo.getNodeValue() );
	              }
	        }
			
		}catch(Exception e) {
			e.printStackTrace();
		}**/
		System.out.println( file );
	}
	
}